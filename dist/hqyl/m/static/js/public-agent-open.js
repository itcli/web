webpackJsonp([32],{AI0B:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("m4g3"),n=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);var o=s("mkDk");var l=function(t){s("b5Jf")},r=s("VU/8")(n.a,o.a,!1,l,"data-v-e7a81174",null);e.default=r.exports},b5Jf:function(t,e){},m4g3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(s("475x"));s("+iqb");var n=s("6cYu"),a=o(s("qhTv"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"AgentOpen",mixins:[a.default],components:{TitleHeader:n.TitleHeader,InputRow:n.InputRow,vantSwitch:i.default},data:function(){return{bodyHeight:0,tabIndex:parseInt(localStorage.agentOpenIndex)||0,animation:"",userType:!0,user:"",opening:!1,password:"12345678",loading:!1,page:0,pageSize:12,noMore:!1,list:[],actionIndex:-1,actionOddsShow:!1,key:""}},watch:{tabIndex:function(t,e){this.animation=t>e?"slide-left":"slide-right",this.clean(),2===t&&this.onPullingDown(),localStorage.agentOpenIndex=t}},created:function(){this.refundRebate||this.$store.dispatch("agent/getRefundRebate").then(),this.key=Date.now()},computed:{siteModel:function(){return this.$store.state.main.config.site_model},listHeight:function(){return this.bodyHeight-1.12*window.innerWidth/7.5},actionShow:{get:function(){return!this.actionOddsShow&&this.actionIndex>-1},set:function(t){t||this.actionOddsShow||(this.actionIndex=-1)}},refundRebate:{get:function(){return this.$store.state.agent.refundRebateForOpen},set:function(t){this.$store.state.agent.refundRebateForOpen=t}}},mounted:function(){var t=this;2===this.tabIndex&&this.onPullingDown(),this.$nextTick(function(){t.$refs.header&&(t.bodyHeight=document.documentElement.clientHeight-t.$refs.header.offsetHeight,t.$nextTick(function(){t.$refs.scroll&&t.$refs.scroll.refresh()}))}),window.addEventListener("resize",function(){t.$refs.header&&(t.bodyHeight=document.documentElement.clientHeight-t.$refs.header.offsetHeight,t.$nextTick(function(){t.$refs.scroll&&t.$refs.scroll.refresh()}))})},updated:function(){var t=this;this.$refs.header&&(this.bodyHeight=document.documentElement.clientHeight-this.$refs.header.offsetHeight,this.$nextTick(function(){t.$refs.scroll&&t.$refs.scroll.refresh()}))},methods:{onSwipeLeft:function(){this.tabIndex+1<3&&this.tabIndex++},onSwipeRight:function(){this.tabIndex>0&&this.tabIndex--},onUp:function(){var t=this;if(this.list[this.actionIndex]){var e=this.list[this.actionIndex];this.$store.dispatch("agent/domainUp",{id:e.id,status:"yes"===e.status?"no":"yes"}).then(function(e){200===e.code?(t.toastText(e.data,window.TOAST_POSITION.TOP),t.onPullingDown()):t.toastText(e.message,window.TOAST_POSITION.TOP)})}this.actionIndex=-1},onLook:function(){this.$store.state.agent.openAgentOdds=this.list[this.actionIndex],this.actionOddsShow=!0},onCopy:function(){var t=this,e="invite_code"===this.siteModel?this.list[this.actionIndex].agencyCode:this.list[this.actionIndex].domain;this.$copyText(e).then(function(){t.toastText("复制成功",window.TOAST_POSITION.TOP)}),this.actionIndex=-1},onPullingDown:function(){this.page=0,this.noMore=!1,this.loadList(!0)},onPullingUp:function(){this.loadList()},loadList:function(t){var e=this;this.loading?(this.toastText("正在获取",window.TOAST_POSITION.TOP),this.$refs.scroll&&(this.$refs.scroll.forceUpdate(),this.$refs.scroll.refresh())):this.noMore?(this.toastText("没有更多",window.TOAST_POSITION.TOP),this.$refs.scroll&&(this.$refs.scroll.forceUpdate(),this.$refs.scroll.refresh())):(this.page++,this.loading=!0,this.$store.state.main.loadingText="获取中...",this.$store.dispatch("agent/domainList",{page:this.page,pageSize:this.pagesize}).then(function(s){200===s.code?e.list=t?s.data.list.data:e.list.concat(s.data.list.data):(e.toastText(s.message,window.TOAST_POSITION.TOP),e.page--),e.$store.state.main.loadingText="",e.loading=!1,e.$refs.scroll&&(e.$refs.scroll.forceUpdate(),e.$refs.scroll.refresh())}).catch(function(){e.page--,e.$store.state.main.loadingText="",e.loading=!1,e.$refs.scroll&&(e.$refs.scroll.forceUpdate(),e.$refs.scroll.refresh())}))},clean:function(){this.user="",this.password="12345678",this.userType=!0,this.refundRebate=JSON.copyObj(this.$store.state.agent.refundRebate),this.loading=!1,this.noMore=!1,this.page=0},onLink:function(){var t=this;this.opening?this.toastText("正在创建",window.TOAST_POSITION.TOP):function(){t.opening=!0,t.$store.state.main.loadingText="创建中...";var e={};for(var s in t.refundRebate)t.refundRebate.hasOwnProperty(s)&&t.refundRebate[s].list.forEach(function(t){e[t.key]=t.value});t.$store.dispatch("agent/domainAdd",{type:t.userType?0:1,json:e}).then(function(e){200===e.code?(t.toastText(e.data,window.TOAST_POSITION.TOP),t.clean()):t.toastText(e.message,window.TOAST_POSITION.TOP),t.opening=!1,t.$store.state.main.loadingText=""}).catch(function(){t.toastText("网络错误",window.TOAST_POSITION.TOP),t.opening=!1,t.$store.state.main.loadingText=""})}()},onOpen:function(){var t=this;this.opening?this.toastText("正在创建",window.TOAST_POSITION.TOP):this.checkUserForRegister(this.user,window.TOAST_POSITION.TOP)&&function(){t.opening=!0,t.$store.state.main.loadingText="创建中...";var e={};for(var s in t.refundRebate)t.refundRebate.hasOwnProperty(s)&&t.refundRebate[s].list.forEach(function(t){e[t.key]=t.value});t.$store.dispatch("agent/createAccount",{type:t.userType?0:1,name:t.user,password:t.password,json:e}).then(function(e){200===e.code?(t.toastText(e.data,window.TOAST_POSITION.TOP),t.clean()):t.toastText(e.message,window.TOAST_POSITION.TOP),t.opening=!1,t.$store.state.main.loadingText=""}).catch(function(){t.toastText("网络错误",window.TOAST_POSITION.TOP),t.opening=!1,t.$store.state.main.loadingText=""})}()}}}},mkDk:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-page"},[s("div",{ref:"header",staticClass:"head"},[s("title-header",{attrs:{title:t.$route.meta.title||"下级开户"}}),t._v(" "),s("vux-tab",{staticClass:"tab",staticStyle:{"background-color":"#fff"},attrs:{"line-width":2},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[s("vux-tab-item",[t._v("精准开户")]),t._v(" "),s("vux-tab-item",[t._v("创建邀请")]),t._v(" "),s("vux-tab-item",[t._v("管理邀请")])],1)],1),t._v(" "),s("div",{directives:[{name:"hammer",rawName:"v-hammer.swipeleft",value:t.onSwipeLeft,expression:"onSwipeLeft",modifiers:{swipeleft:!0}},{name:"hammer",rawName:"v-hammer.swiperight",value:t.onSwipeRight,expression:"onSwipeRight",modifiers:{swiperight:!0}}],staticClass:"body"},[s("transition-group",{attrs:{name:t.animation}},[0===t.tabIndex?s("div",{key:"tab-0",staticClass:"animation-box",style:{height:t.bodyHeight+"px"}},[s("cube-scroll",{ref:"scroll"},[s("vux-group",[s("input-row",{attrs:{label:"开户类型:"}},[s("div",{staticClass:"check-type",attrs:{slot:"input"},slot:"input"},[s("span",{class:{type:!0,active:!t.userType}},[t._v("代理")]),t._v(" "),s("vant-switch",{attrs:{size:"0.45rem"},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}}),t._v(" "),s("span",{class:{type:!0,active:t.userType}},[t._v("会员")])],1)]),t._v(" "),s("input-row",{attrs:{type:"text",label:"开户帐号:",placeholder:"请输入6-10位数字或字母","max-len":"10"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),t._v(" "),s("input-row",{attrs:{type:"text",label:"帐号密码:",placeholder:"请输入8-20位数字或字母",disabled:"","max-len":"20"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),s("vux-group",[s("p",{staticClass:"group-title",attrs:{slot:"title"},slot:"title"},[t._v("分润设置")]),t._v(" "),t._l(t.refundRebate,function(e,i){return s("vux-cell-box",{directives:[{name:"show",rawName:"v-show",value:t.checkGameTypeShow(e.name),expression:"checkGameTypeShow(v.name)"}],key:i,attrs:{"is-link":"",link:"/user/agent/open/odds/"+i+"/edit?t=1"+Date.now()}},[s("div",{staticClass:"cell-box"},[s("div",{staticClass:"name"},[t._v(t._s(e.name)+":")]),t._v(" "),s("div",{staticClass:"value number-text"},[t._v(t._s(t.$VuxUtil.number.oneFloat(e.list[0].value))+"%")])])])})],2),t._v(" "),s("div",{staticClass:"foot-box",staticStyle:{"margin-bottom":"40px"}},[s("vux-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.onOpen(e)}}},[t._v("立即开户")])],1)],1)],1):1===t.tabIndex?s("div",{key:"tab-1",staticClass:"animation-box",style:{height:t.bodyHeight+"px"}},[s("cube-scroll",{ref:"scroll"},[s("vux-group",[s("input-row",{attrs:{label:"开户类型:"}},[s("div",{staticClass:"check-type",attrs:{slot:"input"},slot:"input"},[s("span",{class:{type:!0,active:!t.userType}},[t._v("代理")]),t._v(" "),s("vant-switch",{attrs:{size:"0.45rem"},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}}),t._v(" "),s("span",{class:{type:!0,active:t.userType}},[t._v("会员")])],1)])],1),t._v(" "),s("vux-group",[s("p",{staticClass:"group-title",attrs:{slot:"title"},slot:"title"},[t._v("分润设置")]),t._v(" "),t._l(t.refundRebate,function(e,i){return s("vux-cell-box",{directives:[{name:"show",rawName:"v-show",value:t.checkGameTypeShow(e.name),expression:"checkGameTypeShow(v.name)"}],key:i,attrs:{"is-link":"",link:"/user/agent/open/odds/"+i+"/edit?t=2"+Date.now()}},[s("div",{staticClass:"cell-box"},[s("div",{staticClass:"name"},[t._v(t._s(e.name)+":")]),t._v(" "),s("div",{staticClass:"value number-text"},[t._v(t._s(parseFloat(e.list[0].value))+"%")])])])})],2),t._v(" "),s("div",{staticClass:"foot-box",staticStyle:{"margin-bottom":"140px"}},[s("vux-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.onLink(e)}}},[t._v("立即创建")])],1)],1)],1):2===t.tabIndex?s("div",{key:"tab-2",staticClass:"animation-box tab-2"},[s("ul",{staticClass:"row title clear-fix"},[s("li",{staticClass:"f-l col col-link"},[t._v(t._s("invite_code"===t.siteModel?"邀请码":"邀请链接"))]),t._v(" "),s("li",{staticClass:"f-l col col-data"},[t._v("状态")]),t._v(" "),s("li",{staticClass:"f-l col col-data"},[t._v("注册人数")])]),t._v(" "),s("div",{staticClass:"list",style:{height:t.listHeight+"px"}},[s("cube-scroll",{ref:"scroll",attrs:{options:t.options},on:{"pulling-down":t.onPullingDown,"pulling-up":t.onPullingUp}},[s("vux-group",t._l(t.list,function(e,i){return s("vux-cell-box",{key:e+"-"+i,attrs:{"is-link":""}},[s("ul",{staticClass:"row clear-fix",on:{click:function(e){t.actionIndex=i}}},[s("li",{staticClass:"f-l col col-link"},[t._v(t._s("invite_code"===t.siteModel?e.agencyCode:e.domain))]),t._v(" "),s("li",{staticClass:"f-l col col-data"},[t._v(t._s("yes"===e.status?"启用":"停用"))]),t._v(" "),s("li",{staticClass:"f-l col col-data"},[t._v(t._s(e.registeredtotal))])])])}),1)],1)],1)]):t._e()])],1),t._v(" "),s("vux-popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],staticClass:"ios-popup",attrs:{position:"bottom","popup-style":{zIndex:1002}},model:{value:t.actionShow,callback:function(e){t.actionShow=e},expression:"actionShow"}},[s("div",{staticClass:"radio"},[s("ul",{staticClass:"list"},[s("li",{staticClass:"item",on:{click:t.onLook}},[t._v("查看赔率")]),t._v(" "),s("li",{staticClass:"item",on:{click:t.onUp}},[t._v(t._s(t.list[t.actionIndex]&&"yes"!==t.list[t.actionIndex].status?"启用":"停用"))]),t._v(" "),s("li",{staticClass:"item",on:{click:t.onCopy}},[t._v("复制邀请"+t._s("invite_code"===t.siteModel?"码":"链接"))])]),t._v(" "),s("button",{staticClass:"btn",on:{click:function(e){t.actionIndex=-1}}},[t._v("取消")])])]),t._v(" "),s("vux-popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],attrs:{position:"bottom","popup-style":{zIndex:1002}},model:{value:t.actionOddsShow,callback:function(e){t.actionOddsShow=e},expression:"actionOddsShow"}},[s("vux-group",{staticClass:"odds-list"},[s("h5",{staticClass:"odds-header",attrs:{slot:"title"},slot:"title"},[t._v("赔率详情")]),t._v(" "),t._l(t.$store.state.agent.refundRebate,function(e,i){return s("vux-cell-box",{directives:[{name:"show",rawName:"v-show",value:t.checkGameTypeShow(e.name),expression:"checkGameTypeShow(v.name)"}],key:i,attrs:{"is-link":""}},[s("div",{staticClass:"odds-item",on:{click:function(e){return t.$router.push("/user/agent/open/odds/"+i+"/readonly")}}},[s("span",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"value number-text"},[t._v(t._s(t.actionIndex>-1?t.list[t.actionIndex][e.list[0].key]:"0")+"%")])])])})],2)],1)],1)},staticRenderFns:[]};e.a=i}});