webpackJsonp([44],{WAMt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("X3w5"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);var l=s("zJyk");var o=function(t){s("aZDB")},r=s("VU/8")(i.a,l.a,!1,o,"data-v-4b898e72",null);e.default=r.exports},X3w5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(s("GyB/")),i=s("6cYu"),n=o(s("3dZY")),l=o(s("qhTv"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[l.default],name:"Account",components:{TitleHeader:i.TitleHeader,DateInterval:i.DateInterval},data:function(){return{page:0,limit:5,date:null,dateIndex:0,tabs:[{k:"withdrawals",v:"提现记录",n:"取款"},{k:"deposit",v:"充值记录",n:"存款"},{k:"bonus",v:"优惠记录",n:"优惠"},{k:"agency",v:"代理记录",n:"收入"},{k:"others",v:"其他记录",n:""}],text:{withdrawals:"总提现",deposit:"总充值",bonus:"总优惠",agency:"总代理",others:"总额"},tabIndex:0,list:[],all:"",animation:"slide-left"}},mounted:function(){this.$store.state.user.token||this.$router.replace("/admin/login")},computed:{tab:function(){return this.tabs[this.tabIndex]}},watch:{date:function(){this.page=0,this.all="",this.refreshList(!0)},tabIndex:function(t,e){var s=this;this.animation=t<e?"slide-right":"slide-left",this.page=0,this.all="",this.$nextTick(function(){s.refreshList(!0),s.jroll&&setTimeout(function(){s.jroll.scrollTo(0,0,300)},600)})}},methods:{showRemark:function(t){["wait","payment"].includes(t.status)||this.toastText(t.remark,window.TOAST_POSITION.TOP)},onSwipeLeft:function(){this.tabIndex+1<this.tabs.length&&this.tabIndex++},onSwipeRight:function(){this.tabIndex>0&&this.tabIndex--},getTime:function(t){return n.default.unix(t).format("YYYY-MM-DD HH:mm:ss")},onPullingDown:function(){this.page=0,this.all="",this.refreshList(!0)},onPullingUp:function(){this.refreshList()},refreshList:function(t){var e=this;this.page++,this.date&&this.tab&&this.tab.k?this.$store.dispatch("user/accountMoneyRecord",{type:this.tab.k,start:this.date.start,end:this.date.end,page:this.page,limit:this.limit}).then(function(s){"object"===(0,a.default)(s.data.amount)?e.all=s.data.amount.total_amount:e.all=s.data.amount,e.list=t?s.data.list:e.list.concat(s.data.list),e.$nextTick(function(){e.$refs.scroll&&(e.$refs.scroll.forceUpdate(),e.$refs.scroll.refresh())})}).catch(function(){e.page--}):(this.list=[],this.$refs.scroll.forceUpdate(),this.$refs.scroll.refresh())}}}},aZDB:function(t,e){},zJyk:function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"record"},[s("div",{staticClass:"record-header"},[s("title-header",{attrs:{title:t.$route.meta.title||"帐变记录"}}),t._v(" "),s("date-interval",{attrs:{date:t.date,default:""},on:{"update:date":function(e){t.date=e}},model:{value:t.dateIndex,callback:function(e){t.dateIndex=e},expression:"dateIndex"}}),t._v(" "),s("vux-tab",{staticClass:"record-tab",staticStyle:{"background-color":"#fff"},attrs:{"scroll-threshold":4,"line-width":2},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabs,function(e){return s("vux-tab-item",{key:e.k},[t._v(t._s(e.v))])}),1)],1),t._v(" "),s("div",{directives:[{name:"hammer",rawName:"v-hammer.swipeleft",value:t.onSwipeLeft,expression:"onSwipeLeft",modifiers:{swipeleft:!0}},{name:"hammer",rawName:"v-hammer.swiperight",value:t.onSwipeRight,expression:"onSwipeRight",modifiers:{swiperight:!0}}],staticClass:"record-content"},[s("transition-group",{attrs:{name:t.animation}},[s("div",{key:"wrapper_"+t.tabIndex,ref:"solid",staticClass:"content-body"},[""!==t.all&&t.list.length?s("cube-scroll",{ref:"scroll",staticClass:"list",attrs:{options:t.options},on:{"pulling-down":t.onPullingDown,"pulling-up":t.onPullingUp}},t._l(t.list,function(e,a){return s("vux-card",{key:e.id+"_"+a},[s("h5",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(["others"].includes(t.tab.k)?e.type:t.tab.n))]),t._v(" "),s("div",{staticClass:"card-content",attrs:{slot:"content"},slot:"content"},[["bonus","agency","others"].includes(t.tab.k)?s("span",{staticClass:"card-code"},[t._v(t._s(e.remarks))]):s("span",{staticClass:"card-code"},[t._v(t._s(e.code))]),t._v(" "),s("span",{staticClass:"card-amount"},[s("span",{staticClass:"rmb"},[t._v("¥")]),t._v(t._s(e.amount))])]),t._v(" "),s("div",{staticClass:"card-footer",attrs:{slot:"footer"},slot:"footer"},[s("span",{staticClass:"card-time"},[t._v(t._s(t.getTime(e.time||e.created_at)))]),t._v(" "),["bonus","others"].includes(t.tab.k)?t._e():s("span",{class:["card-status",e.status],on:{click:function(s){return t.showRemark(e)}}},[["wait","payment"].includes(e.status)?s("i",{staticClass:"fa fa-fw fa-clock-o"}):"fail"===e.status?s("i",{staticClass:"fa fa-fw fa-frown-o"}):"success"===e.status?s("i",{staticClass:"fa fa-fw fa-smile-o"}):t._e(),t._v(" "),s("i",[t._v("\n                  "+t._s({wait:"审核中",fail:"失败详情",success:"成功",payment:"交易中"}[e.status])+"\n                ")])])])])}),1):""!==t.all?s("div",{staticClass:"list-empty"},[s("div",{staticClass:"img"}),t._v(" "),s("p",{staticClass:"info"},[t._v("暂无"+t._s(t.tabs[t.tabIndex].v))])]):t._e()],1)])],1),t._v(" "),""!==t.all&&t.list.length?s("div",{staticClass:"record-footer"},[s("div",{staticClass:"item"}),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v(t._s(t.text[t.tab.k]))]),t._v(" "),s("span",{staticStyle:{color:"#ff2200"}},[s("span",{staticClass:"rmb"},[t._v("¥")]),t._v(t._s(t.all))])])]):t._e()])},staticRenderFns:[]};e.a=a}});