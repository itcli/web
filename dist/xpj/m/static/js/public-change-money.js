webpackJsonp([22],{J2Fw:function(e,t,i){"use strict";var n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view-page",[i("title-header",{attrs:{slot:"header",title:e.$route.meta.title||"代理转账"},slot:"header"}),e._v(" "),i("div",{staticClass:"change-money",attrs:{slot:"content"},slot:"content"},[i("vux-group",[i("vux-cell-box",[i("div",{staticClass:"cell-item top"},[i("span",[e._v("可用代理收入:")]),e._v(" "),i("span",{staticClass:"red"},[e._v(e._s(e.userInfo.agencyInfo.balance))]),e._v(" "),i("span",[e._v("元")])])]),e._v(" "),i("vux-cell-box",[i("label",{staticClass:"cell-item input-row"},[i("span",{staticClass:"label"},[e._v("￥")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.money,expression:"money"}],staticClass:"input",attrs:{type:"tel",placeholder:"转账金额"+e.userInfo.agencyInfo.balance},domProps:{value:e.money},on:{input:function(t){t.target.composing||(e.money=t.target.value)}}}),e._v(" "),i("span",{staticClass:"all",on:{click:function(t){e.money=e.userInfo.agencyInfo.balance}}},[e._v("全部")])])])],1),e._v(" "),i("div",{staticStyle:{padding:"0.24rem"}},[i("vux-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSubmit(t)}}},[e._v("立即转帐")])],1)],1)],1)},staticRenderFns:[]};t.a=n},UQsU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("6cYu"),s=a(i("qhTv")),o=a(i("VmD8"));function a(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[s.default],name:"ChangeMoney",components:{ViewPage:o.default,TitleHeader:n.TitleHeader},computed:{userInfo:function(){return this.$store.state.user.userInfo}},data:function(){return{money:"",submitting:!1}},created:function(){this.userInfo||this.$router.replace("/admin/login")},methods:{onSubmit:function(){var e=this;this.submitting?this.toastText("正在提交",window.TOAST_POSITION.TOP):this.money?parseFloat(this.money)?parseFloat(this.money)>parseFloat(this.userInfo.agencyInfo.balance)?this.toastText("转帐金额不能大于可用金额",window.TOAST_POSITION.TOP):parseFloat(this.money)<0?this.toastText("转帐金额不能小于0元",window.TOAST_POSITION.TOP):parseFloat(this.money)<1?this.toastText("转帐金额不能小于1元",window.TOAST_POSITION.TOP):(this.submitting=!0,this.$store.state.main.loadingText="转帐中~~",this.$store.dispatch("agent/changeMoney",{money:parseFloat(this.money)}).then(function(t){200===t.code?(e.toastText("转帐完成",window.TOAST_POSITION.TOP),e.money="",e.$store.dispatch("user/refreshInfo").then(function(){e.$router.back()})):e.toastText(t.message,window.TOAST_POSITION.TOP),e.submitting=!1,e.$store.state.main.loadingText=""}).catch(function(){e.submitting=!1,e.$store.state.main.loadingText=""})):this.toastText("请输入正确的金额",window.TOAST_POSITION.TOP):this.toastText("请输入转帐金额",window.TOAST_POSITION.TOP)}}}},VNfT:function(e,t,i){"use strict";var n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view-page"},[i("div",{ref:"view-page-header",staticClass:"view-page-header",attrs:{"v-no-touch-move":!e.headerTouch}},[e._t("header")],2),e._v(" "),i("div",{directives:[{name:"hammer",rawName:"v-hammer.swipeleft",value:e.onLeft,expression:"onLeft",modifiers:{swipeleft:!0}},{name:"hammer",rawName:"v-hammer.swiperight",value:e.onRight,expression:"onRight",modifiers:{swiperight:!0}}],ref:"view-page-content",staticClass:"view-page-content",style:{height:e.height+"px"},on:{touchstart:e.onTouch}},[i("cube-scroll",{ref:"scroll",attrs:{options:{preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|IMG)$/}}}},[i("div",{ref:"content",staticStyle:{padding:"0",margin:"0","box-sizing":"border-box",width:"100%",position:"relative"},style:{minHeight:e.height+"px"}},[e._t("content")],2)])],1),e._v(" "),i("div",{ref:"view-page-footer",staticClass:"view-page-footer"},[e._t("footer")],2)])},staticRenderFns:[]};t.a=n},VmD8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("dPLf"),s=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);var a=i("VNfT");var r=function(e){i("gKhl")},c=i("VU/8")(s.a,a.a,!1,r,"data-v-3ef7aac1",null);t.default=c.exports},"Yg/X":function(e,t){},dPLf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ViewPage",props:{headerTouch:{type:Boolean,default:!1}},data:function(){return{height:0}},mounted:function(){this.refresh(),this.domResize.bind(this.$refs["view-page-header"],this.refresh.bind(this)),this.domResize.bind(this.$refs.content,this.refresh.bind(this))},beforeDestroy:function(){this.domResize.remove(this.$refs["view-page-header"]),this.domResize.remove(this.$refs.content)},updated:function(){this.refresh()},watch:{height:function(){var e=this;this.$nextTick(function(){e.$refs.scroll&&e.$refs.scroll.refresh()})}},methods:{onTouch:function(){this.$refs.scroll&&this.$refs.scroll.refresh()},onLeft:function(){this.$emit("left")},onRight:function(){this.$emit("right")},refresh:function(){this.$refs["view-page-header"]&&this.$refs["view-page-content"]&&this.$refs["view-page-footer"]&&(this.height=window.innerHeight-this.$refs["view-page-header"].offsetHeight-this.$refs["view-page-footer"].offsetHeight)}}}},gKhl:function(e,t){},s6jW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("UQsU"),s=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);var a=i("J2Fw");var r=function(e){i("Yg/X")},c=i("VU/8")(s.a,a.a,!1,r,"data-v-887211bc",null);t.default=c.exports}});