webpackJsonp([35],{JXL4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i("8FtN")),s=i("6cYu"),a=r(i("qhTv"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[a.default],name:"AgentOddsEditor",components:{TitleHeader:s.TitleHeader},props:{type:{type:String,default:""}},data:function(){return{types:[{k:"LIVE",v:"视讯返水"},{k:"GAME",v:"电子返水"},{k:"SPORT",v:"体育返水"},{k:"LOTTERY",v:"彩票返点"},{k:"CHESS",v:"棋牌返水"},{k:"CT_LOTTERY",v:"彩票返水"}],typeObj:null,modal:null,list:[],submitting:!1,activeKey:"",val:[]}},computed:{numbers:function(){var t=this,e=[],i=0;this.activeKey&&this.type&&(i=100*parseFloat(this.$store.state.agent.refundRebate[this.type].list.find(function(e){return e.key===t.activeKey}).value));for(var n=0;n<=i;n+=10){var s=this.$VuxUtil.number.twoFloat(n/100);e.push({text:s+"%",value:s})}return e},show:{get:function(){return!!this.activeKey},set:function(t){this.activeKey=t?this.activeKey:""}},user:function(){return this.$store.state.agent.agentListSelected},refundRebate:function(){return this.$store.state.agent.refundRebate},key:function(){return"lotterys"===this.type?"ct_lottery":this.type}},created:function(){var t=this;if(this.refundRebate&&this.refundRebate.length){if(this.typeObj=this.types.find(function(e){return e.k===t.type.toUpperCase()}),!this.user||!this.typeObj)return void this.$router.back();this.list=(0,n.default)(this.user).filter(function(e){var i=!!e.includes(t.type.toUpperCase());return"LOTTERY"===t.type.toUpperCase()?i=i&&!["CT_LOTTERY","VR_LOTTERY"].includes(e):"CT_LOTTERY"===t.type.toUpperCase()&&(i=["CT_LOTTERY","VR_LOTTERY"].includes(e)),i&&t.label(e)}),this.modal={},this.list.forEach(function(e){t.modal[e]=t.user[e]})}else this.$store.dispatch("agent/getRefundRebate").then(function(){t.typeObj=t.types.find(function(e){return e.k===t.type.toUpperCase()}),t.user&&t.typeObj?(t.list=(0,n.default)(t.user).filter(function(e){var i=!!e.includes(t.type.toUpperCase());return"LOTTERY"===t.type.toUpperCase()?i=i&&!["CT_LOTTERY","VR_LOTTERY"].includes(e):"CT_LOTTERY"===t.type.toUpperCase()&&(i=["CT_LOTTERY","VR_LOTTERY"].includes(e)),i&&t.label(e)}),t.modal={},t.list.forEach(function(e){t.modal[e]=t.user[e]})):t.$router.back()})},methods:{onNumberChange:function(t){this.modal[this.activeKey]=t[0],this.activeKey=""},onActive:function(t){var e=this,i=void 0,n=void 0,s={};this.list.forEach(function(a){if(i=parseFloat(e.modal[a]),t){var r=e.refundRebate[e.type];if(!r)return!1;n=parseFloat(r.list.find(function(t){return t.key===a}).value),i<n?(i+=.1,s[a]=e.$VuxUtil.number.twoFloat(i)):s[a]=e.modal[a]}else i>0?(i-=.1,s[a]=e.$VuxUtil.number.twoFloat(i)):s[a]=e.modal[a]}),this.modal=s},label:function(t){var e=this.refundRebate[this.key].list.find(function(e){return e.key===t});return e?e.name:""},onSubmit:function(){var t=this;if(this.submitting)this.toastText("正在获取",window.TOAST_POSITION.TOP);else{this.submitting=!0,this.$store.state.main.loadingText="正在提交...";var e={};(0,n.default)(this.user).filter(function(e){return(0,n.default)(t.refundRebate).some(function(t){return e.includes(t.toUpperCase())})}).forEach(function(i){e[i]=t.modal[i]||t.user[i]}),this.$store.dispatch("agent/lowerUpRefund",{uid:this.user.uid,data:e}).then(function(e){200===e.code?(t.toastText("修改成功",window.TOAST_POSITION.TOP),setTimeout(function(){t.$router.back()},1e3)):t.toastText(e.message,window.TOAST_POSITION.TOP),t.submitting=!1,t.$store.state.main.loadingText=""}).catch(function(){t.submitting=!1,t.$store.state.main.loadingText=""})}}}}},lWt6:function(t,e){},"nF+T":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("JXL4"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);var r=i("oR9K");var u=function(t){i("lWt6")},o=i("VU/8")(s.a,r.a,!1,u,"data-v-b148650a",null);e.default=o.exports},oR9K:function(t,e,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"view-page"},[i("div",{staticClass:"head"},[i("title-header",{attrs:{title:t.typeObj&&t.typeObj.v}}),t._v(" "),i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[i("span",{staticClass:"label flex-1"},[t._v(t._s(t.typeObj&&t.typeObj.v)+"设置")]),t._v(" "),i("span",{staticClass:"label"},[t._v("统一设置")]),t._v(" "),i("span",{staticClass:"action-0",on:{click:function(e){return t.onActive()}}},[t._v("－")]),t._v(" "),i("span",{staticClass:"action-1",on:{click:function(e){return t.onActive(!0)}}},[t._v("＋")])])],1),t._v(" "),t.user?i("div",{staticClass:"body"},[i("cube-scroll",[i("vux-group",t._l(t.list,function(e){return i("vux-cell-box",{key:e,attrs:{"is-link":""}},[i("div",{staticClass:"cell",on:{click:function(i){t.activeKey=e}}},[i("span",{staticClass:"label"},[t._v(t._s(t.label(e)))]),t._v(" "),i("span",{staticClass:"value number-text"},[t._v(t._s(t.$VuxUtil.number.oneFloat(t.modal[e]))+"%")])])])}),1)],1)],1):t._e(),t._v(" "),i("div",{staticClass:"foot"},[i("vux-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.onSubmit(e)}}},[t._v("提交修改")])],1),t._v(" "),i("cube-picker",{attrs:{data:[t.numbers]},on:{select:t.onNumberChange},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},staticRenderFns:[]};e.a=n}});